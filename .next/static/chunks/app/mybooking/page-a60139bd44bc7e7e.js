(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{518:(e,s,i)=>{"use strict";i.d(s,{Ay:()=>l,L$:()=>t,jD:()=>n});let a=(0,i(8943).Z0)({name:"credentials",initialState:{showCredentials:!1},reducers:{show:e=>{e.showCredentials=!0},hide:e=>{e.showCredentials=!1},toggle:e=>{e.showCredentials=!e.showCredentials}}}),{show:r,hide:n,toggle:t}=a.actions,l=a.reducer},1224:(e,s,i)=>{Promise.resolve().then(i.bind(i,4788))},1236:()=>{},1875:()=>{},1889:()=>{},2329:()=>{},3057:()=>{},3374:()=>{},4146:(e,s,i)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),!function(e,s){for(var i in s)Object.defineProperty(e,i,{enumerable:!0,get:s[i]})}(s,{default:function(){return d},getImageProps:function(){return l}});let a=i(306),r=i(666),n=i(7970),t=a._(i(5514));function l(e){let{props:s}=(0,r.getImgProps)(e,{defaultLoader:t.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,i]of Object.entries(s))void 0===i&&delete s[e];return{props:s}}let d=n.Image},4788:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>R});var a=i(5155),r=i(2115),n=i(2651),t=i(3391),l=i(518);i(3057);var d=i(6046);let c=()=>{let{isLoggedIn:e}=(0,t.d4)(e=>e.auth),s=(0,t.wA)(),i=(0,d.useRouter)();return(0,a.jsxs)("div",{className:"no-bookings-box",children:[(0,a.jsx)("h4",{className:"no-bookings-box-heading",children:e?"No Upcoming Bookings":"You Are Not Signed In"}),(0,a.jsx)("p",{className:"no-bookings-box-para",children:e?"You donâ€™t have any upcoming rides scheduled. Book now to plan your next journey!":"Please sign in to view and manage your bookings effortlessly."}),(0,a.jsx)("button",{onClick:()=>{e||s((0,l.L$)()),e&&i.push("/")},className:"no-bookings-box-button",children:e?"Get Ride":"Sign In"})]})};i(7075);var o=i(5565);i(7570),i(1236);let h=e=>{let{status:s}=e;return(0,a.jsxs)("div",{className:"rideStatus-container",children:[(0,a.jsx)("h5",{className:"rideStatus-header",children:"Status : "}),(0,a.jsx)("p",{className:"rideStatus-para",children:s})]})},g=e=>{let{vehicle:s,price:i,status:r,passengerCount:n,luggageCount:t}=e;return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"upComingBooking-vehicle-details-row",children:[(0,a.jsx)("div",{className:"upComingBooking-vehicle-image-wrapper",children:(0,a.jsx)(o.default,{src:"/ride-history-car.png",alt:"car",height:47,width:52,className:"upComingBooking-vehicle-image"})}),(0,a.jsxs)("div",{className:"upComingBooking-vehicles-details",children:[(0,a.jsx)("h5",{className:"upComingBooking-vehicle-name",children:s}),(0,a.jsxs)("div",{className:"upComingBooking-vehicle-capacity",children:[(0,a.jsxs)("div",{className:"upComingBooking-vehicle-capacity-detail",children:[(0,a.jsx)(o.default,{src:"/passenger.png",alt:"passenger",height:18,width:19}),(0,a.jsx)("h5",{className:"upComingBooking-vehicle-passengers",children:n})]}),(0,a.jsx)("span",{children:"."}),(0,a.jsxs)("div",{className:"upComingBooking-vehicle-capacity-detail",children:[(0,a.jsx)(o.default,{src:"/luggage.png",alt:"luggage",height:18,width:18}),(0,a.jsx)("h5",{className:"upComingBooking-vehicle-luggage",children:t})]}),(0,a.jsx)("span",{children:"."}),(0,a.jsxs)("div",{className:"ride-history-price",children:[(0,a.jsx)(o.default,{src:"/money-send-square.png",alt:"payment",height:18,width:18}),i]})]}),(0,a.jsx)(h,{status:r})]})]})})};i(9514);var u=i(5829);let m=e=>{let{date:s,time:i}=e,r=(0,u.Yq)(s),n=(0,u.fU)(i);return(0,a.jsx)("div",{className:"upComingRide-date-row",children:(0,a.jsxs)("div",{className:"upComingRide-date-box",children:[(0,a.jsxs)("div",{className:"upComingRide-date",children:[(0,a.jsx)(o.default,{src:"/calender-golden.png",alt:"calendar",height:18,width:18}),r]}),(0,a.jsx)("span",{className:"upComingRide-dot",children:"."}),(0,a.jsxs)("div",{className:"upComingRide-time",children:[(0,a.jsx)(o.default,{src:"/clock-golden.png",alt:"clock",height:18,width:18}),n]})]})})};i(3374);let x=e=>{let{from:s,to:i}=e;return(0,a.jsxs)("div",{className:"upComingRide-location-details",children:[(0,a.jsxs)("div",{className:"upComingRide-location-heading-row",children:[(0,a.jsx)(o.default,{src:"/location-gold.png",alt:"from",height:18,width:18}),(0,a.jsx)("h5",{className:"upComingRide-heading-from",children:"FROM :"})]}),(0,a.jsx)("p",{className:"upComingRide-location-para",children:s}),(0,a.jsxs)("div",{className:"upComingRide-location-heading-row",children:[(0,a.jsx)(o.default,{src:"/location-gold.png",alt:"to",height:18,width:18}),(0,a.jsx)("h5",{className:"upComingRide-heading-to",children:"TO :"})]}),(0,a.jsx)("p",{className:"upComingRide-location-para",children:i})]})};i(4846);let p=e=>{let{returnDate:s,returnTime:i}=e,r=s?(0,u.Yq)(s):null,n=i?(0,u.fU)(i):null;return(0,a.jsxs)("div",{className:"upComingRide-return-box",children:[(0,a.jsx)("h5",{className:"upComingRide-return-heading",children:"Return Schedule :"}),s?(0,a.jsxs)("div",{className:"upComingRide-return-date-box",children:[(0,a.jsxs)("div",{className:"upComingRide-date",children:[(0,a.jsx)(o.default,{src:"/calendar.png",alt:"calendar",height:18,width:18}),r]}),(0,a.jsx)("span",{children:"."}),(0,a.jsxs)("div",{className:"upComingRide-time",children:[(0,a.jsx)(o.default,{src:"/clock.png",alt:"clock",height:18,width:18}),n]})]}):(0,a.jsx)("p",{className:"upComingRide-no-return",children:"No Return Schedule"})]})},j=e=>{let{rideData:s}=e;return(0,a.jsx)("div",{className:"upComingBookings-container",children:s.map((e,s)=>(0,a.jsxs)("div",{className:"upComingBookings-box",children:[(0,a.jsxs)("div",{className:"ride-dateAndReturn-column",children:[(0,a.jsx)(m,{date:e.bookingDate,time:e.bookingTime}),(0,a.jsx)(p,{returnDate:e.returnDate,returnTime:e.returnTime})]}),(0,a.jsx)(x,{from:e.fromLocation,to:e.toLocation}),(0,a.jsx)(g,{vehicle:e.vehicleName,price:e.totalFare,status:e.status,passengerCount:e.luggageAndPassenger.passengerCount,luggageCount:e.luggageAndPassenger.luggageCount})]},s))})};i(1875);let v=e=>{let{rideData:s}=e;return(0,a.jsxs)("div",{className:"myBookingPage-container",children:[(0,a.jsx)("h2",{className:"myBookingPage-heading",children:"Upcoming Rides"}),s.length>0?(0,a.jsx)(j,{rideData:s}):(0,a.jsx)(c,{})]})};i(5506),i(2329);let N=e=>{let{from:s,to:i}=e;return(0,a.jsxs)("div",{className:"ride-history-location-details",children:[(0,a.jsxs)("div",{className:"ride-history-location-heading-row",children:[(0,a.jsx)(o.default,{src:"/location-gray.png",alt:"from",height:18,width:18}),(0,a.jsx)("h5",{className:"ride-history-heading-from",children:"FROM :"})]}),(0,a.jsx)("p",{className:"ride-history-location-para",children:s}),(0,a.jsxs)("div",{className:"ride-history-location-heading-row",children:[(0,a.jsx)(o.default,{src:"/location-gray.png",alt:"to",height:18,width:18}),(0,a.jsx)("h5",{className:"ride-history-heading-to",children:"TO :"})]}),(0,a.jsx)("p",{className:"ride-history-location-para",children:i})]})};i(5175);let y=e=>{let{vehicle:s,passengerCount:i,luggageCount:r}=e;return(0,a.jsxs)("div",{className:"ride-history-vehicle-details-row",children:[(0,a.jsx)("div",{className:"ride-history-vehicle-image-wrapper",children:(0,a.jsx)(o.default,{src:"/ride-history-car.png",alt:"car",height:47,width:52,className:"ride-history-vehicle-image"})}),(0,a.jsxs)("div",{className:"ride-history-vehicles-details",children:[(0,a.jsxs)("div",{className:"ride-history-vehicleAndReview",children:[(0,a.jsx)("h5",{className:"ride-history-vehicle-name",children:s}),(0,a.jsx)("span",{children:"."}),(0,a.jsx)(o.default,{src:"/star.png",alt:"star",height:21,width:21}),(0,a.jsx)("p",{className:"ride-history-review-stars",children:s.reviewStars})]}),(0,a.jsxs)("div",{className:"ride-history-vehicle-capacity",children:[(0,a.jsxs)("div",{className:"ride-history-capacity-detail",children:[(0,a.jsx)(o.default,{src:"/passenger.png",alt:"passenger",height:18,width:18}),(0,a.jsx)("span",{children:":"}),(0,a.jsx)("h5",{className:"ride-history-vehicle-passengers",children:i})]}),(0,a.jsx)("span",{className:"ride-history-capacity-detail-divider",children:"."}),(0,a.jsxs)("div",{className:"ride-history-capacity-detail",children:[(0,a.jsx)(o.default,{src:"/luggage.png",alt:"luggage",height:18,width:18}),(0,a.jsx)("span",{children:":"}),(0,a.jsx)("h5",{className:"ride-history-vehicle-luggage",children:r})]})]})]})]})};i(1889);let f=e=>{let{returnDate:s,returnTime:i}=e,r=s?(0,u.Yq)(s):null,n=i?(0,u.fU)(i):null;return(0,a.jsxs)("div",{className:"ride-history-return-box",children:[(0,a.jsx)("h5",{className:"ride-history-return-heading",children:"Return Schedule :"}),s?(0,a.jsxs)("div",{className:"ride-history-return-date-box",children:[(0,a.jsxs)("div",{className:"ride-history-date",children:[(0,a.jsx)(o.default,{src:"/calendar.png",alt:"calendar",height:18,width:18}),r]}),(0,a.jsx)("span",{children:"."}),(0,a.jsxs)("div",{className:"ride-history-time",children:[(0,a.jsx)(o.default,{src:"/clock.png",alt:"clock",height:18,width:18}),n]})]}):(0,a.jsx)("p",{className:"ride-history-no-return",children:"No Return Schedule"})]})};i(7937);let w=e=>{let{price:s}=e;return(0,a.jsxs)("div",{className:"ride-history-price",children:[(0,a.jsx)(o.default,{src:"/money-send-square.png",alt:"payment",height:22,width:22}),(0,a.jsx)("span",{children:s})]})};i(5945);let k=e=>{let{date:s,time:i}=e,r=(0,u.Yq)(s),n=(0,u.fU)(i);return(0,a.jsx)("div",{className:"ride-history-date-row",children:(0,a.jsxs)("div",{className:"ride-history-date-box",children:[(0,a.jsxs)("div",{className:"ride-history-date",children:[(0,a.jsx)(o.default,{src:"/calender-golden.png",alt:"calendar",height:18,width:18}),r]}),(0,a.jsx)("span",{className:"ride-history-dot",children:"."}),(0,a.jsxs)("div",{className:"ride-history-time",children:[(0,a.jsx)(o.default,{src:"/clock-golden.png",alt:"clock",height:18,width:18}),n]})]})})},C=e=>{let{rideData:s}=e;return(0,a.jsxs)("div",{className:"ride-history-wrapper",children:[(0,a.jsx)("h2",{className:"ride-history-heading",children:"Ride History"}),(0,a.jsx)("div",{className:"ride-history-container",children:null==s?void 0:s.map((e,s)=>(0,a.jsxs)("div",{className:"ride-history-box",children:[(0,a.jsxs)("div",{className:"ride-history-price-date-row",children:[(0,a.jsx)(k,{date:e.bookingDate,time:e.bookingTime}),(0,a.jsx)(w,{price:e.totalFare})]}),(0,a.jsx)(N,{from:e.fromLocation,to:e.toLocation}),(0,a.jsx)(y,{vehicle:e.vehicleName,passengerCount:e.luggageAndPassenger.passengerCount,luggageCount:e.luggageAndPassenger.luggageCount}),(0,a.jsx)(f,{returnDate:e.returnDate,returnTime:e.returnTime})]},s))})]})};var b=i(9208);let R=()=>{let e=(0,t.d4)(e=>e.auth.isLoggedIn),[s,i]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null);if((0,r.useEffect)(()=>{if(!e){d(!1),i([]);return}(async()=>{try{let e=b.A.get("accessToken");if(!e){console.error("No access token found in cookies");return}let s=await n.A.get("https://api.urido.co.uk/booking/my-bookings",{headers:{Authorization:"Bearer ".concat(e)}});s.data.success&&(i(s.data.data),d(!1))}catch(e){o(e)}finally{d(!1)}})()},[e]),l)return(0,a.jsx)("div",{className:"loading-container",children:(0,a.jsxs)("div",{className:"loading-wrapper",children:[(0,a.jsxs)("div",{className:"cosmic-spinner",children:[(0,a.jsx)("div",{className:"ring ring-1"}),(0,a.jsx)("div",{className:"ring ring-2"}),(0,a.jsx)("div",{className:"ring ring-3"}),(0,a.jsx)("div",{className:"center-circle"})]}),(0,a.jsxs)("div",{className:"loading-text",children:[(0,a.jsx)("span",{children:"L"}),(0,a.jsx)("span",{children:"o"}),(0,a.jsx)("span",{children:"a"}),(0,a.jsx)("span",{children:"d"}),(0,a.jsx)("span",{children:"i"}),(0,a.jsx)("span",{children:"n"}),(0,a.jsx)("span",{children:"g"}),(0,a.jsx)("span",{children:"."}),(0,a.jsx)("span",{children:"."}),(0,a.jsx)("span",{children:"."})]})]})});if(c){var h,g;return(0,a.jsxs)("div",{className:"error-container",children:[(0,a.jsx)("div",{className:"error-icon",children:"\uD83D\uDE96"}),(0,a.jsx)("h3",{className:"error-title",children:"Unable to load bookings"}),(0,a.jsx)("p",{className:"error-message",children:(null===(g=c.response)||void 0===g?void 0:null===(h=g.data)||void 0===h?void 0:h.message)||c.message||"An unexpected error occurred. Please try again."}),(0,a.jsx)("button",{className:"error-button",onClick:()=>window.location.reload(),children:"Retry"})]})}let u=["Pending","Process","Accepted"],m=["Completed","Rejected","Canceled"],x=s.filter(e=>u.includes(null==e?void 0:e.status)),p=s.filter(e=>m.includes(null==e?void 0:e.status));return(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{rideData:x}),p.length>0&&(0,a.jsx)(C,{rideData:p})]})}},4846:()=>{},5175:()=>{},5506:()=>{},5565:(e,s,i)=>{"use strict";i.d(s,{default:()=>r.a});var a=i(4146),r=i.n(a)},5829:(e,s,i)=>{"use strict";i.d(s,{Yq:()=>t,fU:()=>l,oL:()=>d,sH:()=>c}),i(3691);var a=i(2922),r=i(9208),n=i(2651);let t=e=>new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"}).replace(/ /g," ").replace(",",""),l=e=>{let[s,i]=e.split(":");return"".concat(s,":").concat(i)},d=e=>{try{return(0,a.s)(e)}catch(e){return console.error("Invalid token:",e),null}},c=async e=>{let s,i,a;let t=r.A.get("accessToken");if(t){let e=d(t);if(!e)throw Error("Failed to decode token");s=e.email,i=e.phone,a=e.userName}else s=e.passengerEmail,i=e.passengerPhone,a=e.passengerName;let l={phone:i,subject:"Booking Confirmation",bookingDetails:e,userEmail:s,userName:a};try{let s=await n.A.post("https://api.urido.co.uk/booking/create",e,{withCredentials:!0});return s.data.data.accessToken&&r.A.set("accessToken",s.data.data.accessToken,{expires:1,secure:!0}),await n.A.post("/frontend-api/sendBookingEmail",l,{withCredentials:!0}),s}catch(e){var c,o;throw console.error("Error in createBooking:",e),(null===(o=e.response)||void 0===o?void 0:null===(c=o.data)||void 0===c?void 0:c.message)||e.message}}},5945:()=>{},7075:()=>{},7570:()=>{},7937:()=>{},9514:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[655,586,970,651,790,441,587,358],()=>s(1224)),_N_E=e.O()}]);