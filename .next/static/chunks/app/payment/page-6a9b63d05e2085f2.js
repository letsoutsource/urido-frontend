(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{634:(e,s,a)=>{Promise.resolve().then(a.bind(a,13571))},13571:(e,s,a)=>{"use strict";a.d(s,{default:()=>u});var r=a(95155),n=a(12115),t=a(11536),i=a(30648);a(22428);var l=a(83391),o=a(76046),c=a(14046),d=a(25829),m=a(89208);let u=()=>{let e=(0,o.useRouter)(),s=(0,l.d4)(e=>e.booking.bookingData),[a,u]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[v,j]=(0,n.useState)({username:"",email:"",phone:""});if((0,n.useEffect)(()=>{if(null==s)e.push("/");else{let e=m.A.get("accessToken");if(e){let s=(0,d.oL)(e);s&&j({username:s.userName||"",email:s.email||"",phone:s.phone||""})}}},[s,e]),null==s)return null;let b=async()=>{try{p(!0);let a=parseFloat(s.distance.replace(/[^\d.-]/g,"")),r={...s,distance:a,passengerName:v.username,passengerEmail:v.email,passengerPhone:v.phone};await (0,d.sH)(r),c.oR.success("Booking Created Successfully!"),e.push("/mybooking")}catch(e){console.error("Error processing payment:",e),c.oR.error("Failed to process payment."),p(!1)}};return(0,r.jsx)("div",{className:"payment-container",children:(0,r.jsxs)("div",{className:"payment-wrapper",children:[(0,r.jsxs)("div",{className:"payment-header",children:[(0,r.jsx)("h1",{children:"Complete Your Booking"}),(0,r.jsx)("p",{children:"Please review your booking details and select a payment method"})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsx)("h2",{children:"Passenger Details"})}),(0,r.jsx)("div",{className:"card-content",children:(0,r.jsxs)("div",{className:"passenger-details",children:[(0,r.jsxs)("div",{className:"passenger-field",children:[(0,r.jsx)("label",{htmlFor:"username",children:"Passenger"}),(0,r.jsx)("input",{type:"text",id:"username",value:null==v?void 0:v.username,onChange:e=>{j(s=>({...s,username:e.target.value}))},className:"passenger-input",placeholder:"Enter your name",autoFocus:!0})]}),(0,r.jsxs)("div",{className:"passenger-field",children:[(0,r.jsx)("label",{children:"Email"}),(0,r.jsx)("div",{className:"passenger-readonly",children:null==v?void 0:v.email})]}),(0,r.jsxs)("div",{className:"passenger-field",children:[(0,r.jsx)("label",{children:"Phone"}),(0,r.jsx)("div",{className:"passenger-readonly",children:null==v?void 0:v.phone})]})]})})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsx)("h2",{children:"Booking Summary"})}),(0,r.jsxs)("div",{className:"card-content",children:[(0,r.jsxs)("div",{className:"booking-grid",children:[(0,r.jsxs)("div",{className:"booking-item",children:[(0,r.jsx)("div",{className:"booking-label",children:"From"}),(0,r.jsx)("div",{className:"booking-value",children:s.fromLocation})]}),(0,r.jsxs)("div",{className:"booking-item",children:[(0,r.jsx)("div",{className:"booking-label",children:"To"}),(0,r.jsx)("div",{className:"booking-value",children:s.toLocation})]}),(0,r.jsxs)("div",{className:"booking-item",children:[(0,r.jsx)("div",{className:"booking-label",children:"Date"}),(0,r.jsx)("div",{className:"booking-value",children:s.bookingDate})]}),(0,r.jsxs)("div",{className:"booking-item",children:[(0,r.jsx)("div",{className:"booking-label",children:"Time"}),(0,r.jsx)("div",{className:"booking-value",children:s.bookingTime})]}),s.returnDate&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"booking-item",children:[(0,r.jsx)("div",{className:"booking-label",children:"Return Date"}),(0,r.jsx)("div",{className:"booking-value",children:s.returnDate})]}),(0,r.jsxs)("div",{className:"booking-item",children:[(0,r.jsx)("div",{className:"booking-label",children:"Return Time"}),(0,r.jsx)("div",{className:"booking-value",children:s.returnTime})]})]})]}),(0,r.jsx)("div",{className:"separator"}),(0,r.jsxs)("div",{className:"summary-details",children:[(0,r.jsxs)("div",{className:"summary-row",children:[(0,r.jsx)("span",{className:"label",children:"Vehicle"}),(0,r.jsx)("span",{children:s.vehicleName})]}),(0,r.jsxs)("div",{className:"summary-row",children:[(0,r.jsx)("span",{className:"label",children:"Distance"}),(0,r.jsx)("span",{children:s.distance})]}),(0,r.jsxs)("div",{className:"summary-row",children:[(0,r.jsx)("span",{className:"label",children:"Travel Duration"}),(0,r.jsx)("span",{children:s.travelDuration})]}),(0,r.jsxs)("div",{className:"summary-row",children:[(0,r.jsx)("span",{className:"label",children:"Passengers"}),(0,r.jsx)("span",{children:s.passengerCount})]}),(0,r.jsxs)("div",{className:"summary-row",children:[(0,r.jsx)("span",{className:"label",children:"Luggage"}),(0,r.jsx)("span",{children:s.luggageCount})]})]}),(0,r.jsx)("div",{className:"separator"}),(0,r.jsxs)("div",{className:"total-row",children:[(0,r.jsx)("span",{children:"Total Amount"}),(0,r.jsxs)("span",{children:["$",s.totalFare]})]})]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsx)("h2",{children:"Select Payment Method"})}),(0,r.jsxs)("div",{className:"card-content",children:[(0,r.jsxs)("div",{className:"payment-methods",children:[(0,r.jsxs)("div",{className:"payment-method-option disabled",children:[(0,r.jsx)("input",{type:"radio",className:"payment-method-radio",disabled:!0}),(0,r.jsxs)("div",{className:"payment-method-label",children:[(0,r.jsx)(t.x1c,{className:"icon"}),(0,r.jsx)("span",{children:"Credit/Debit Card (Disabled)"})]})]}),(0,r.jsxs)("div",{className:"payment-method-option selected",children:[(0,r.jsx)("input",{type:"radio",className:"payment-method-radio",checked:!0,readOnly:!0}),(0,r.jsxs)("div",{className:"payment-method-label",children:[(0,r.jsx)(t.lcY,{className:"icon"}),(0,r.jsx)("span",{children:"Cash Payment"})]})]})]}),a?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"confirmation-message",children:"Please confirm your cash payment on delivery"}),(0,r.jsx)("button",{className:"button button-primary",onClick:b,disabled:h,children:h?"Processing...":"Confirm Payment"}),(0,r.jsx)("button",{className:"button button-outline",onClick:()=>u(!1),disabled:h,children:"Back"})]}):(0,r.jsxs)("button",{className:"button button-primary",onClick:()=>{u(!0)},children:["Continue to Payment",(0,r.jsx)(i.xVu,{})]})]})]})]})})}},22428:()=>{},25829:(e,s,a)=>{"use strict";a.d(s,{Yq:()=>o,fU:()=>c,oL:()=>m,r6:()=>d,sH:()=>u});var r=a(13691),n=a.n(r),t=a(92922),i=a(89208),l=a(82651);let o=e=>new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"}).replace(/ /g," ").replace(",",""),c=e=>{let[s,a]=e.split(":");return"".concat(s,":").concat(a)},d=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n()(e||new Date).format(s?"HH:mm":"YYYY-MM-DD")},m=e=>{try{return(0,t.s)(e)}catch(e){return console.error("Invalid token:",e),null}},u=async e=>{let s=i.A.get("accessToken");if(!s)throw Error("Access token not found in cookies");let a=m(s);if(!a)throw Error("Failed to decode token");let r=a.email,n=a.phone,t=a.userName;try{let s=await l.A.post("https://api.urido.co.uk/booking/create",e,{withCredentials:!0});return await l.A.post("/frontend-api/sendBookingEmail",{phone:n,subject:"Booking Confirmation",bookingDetails:e,userEmail:r,userName:t},{withCredentials:!0}),s}catch(e){var o,c;throw console.error("Error in createBooking:",e),(null===(c=e.response)||void 0===c?void 0:null===(o=c.data)||void 0===o?void 0:o.message)||e.message}}},43463:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=function(){for(var e,s,a=0,r="",n=arguments.length;a<n;a++)(e=arguments[a])&&(s=function e(s){var a,r,n="";if("string"==typeof s||"number"==typeof s)n+=s;else if("object"==typeof s){if(Array.isArray(s)){var t=s.length;for(a=0;a<t;a++)s[a]&&(r=e(s[a]))&&(n&&(n+=" "),n+=r)}else for(r in s)s[r]&&(n&&(n+=" "),n+=r)}return n}(e))&&(r&&(r+=" "),r+=s);return r}},93435:(e,s,a)=>{"use strict";a.d(s,{k5:()=>d});var r=a(12115),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},t=r.createContext&&r.createContext(n),i=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function o(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,r)}return a}function c(e){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?o(Object(a),!0).forEach(function(s){var r,n,t;r=e,n=s,t=a[s],(n=function(e){var s=function(e,s){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,s||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(e,"string");return"symbol"==typeof s?s:s+""}(n))in r?Object.defineProperty(r,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function d(e){return s=>r.createElement(m,l({attr:c({},e.attr)},s),function e(s){return s&&s.map((s,a)=>r.createElement(s.tag,c({key:a},s.attr),e(s.child)))}(e.child))}function m(e){var s=s=>{var a,{attr:n,size:t,title:o}=e,d=function(e,s){if(null==e)return{};var a,r,n=function(e,s){if(null==e)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}(e,s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(r=0;r<t.length;r++)a=t[r],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,i),m=t||s.size||"1em";return s.className&&(a=s.className),e.className&&(a=(a?a+" ":"")+e.className),r.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,n,d,{className:a,style:c(c({color:e.color||s.color},s.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==t?r.createElement(t.Consumer,null,e=>s(e)):s(n)}}},e=>{var s=s=>e(e.s=s);e.O(0,[589,586,711,479,651,950,46,441,587,358],()=>s(634)),_N_E=e.O()}]);